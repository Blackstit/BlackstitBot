<?php
ini_set('log_errors', 'On');
ini_set('error_log', 'php_errors.log');

include('config.php');
include('function.php');
include('mysql.php');

echo get($url.'setWebhook?url='.$webhook);


if (($json = valid()) == false) { exit();}


    $uid = $json['message']['chat']['id'];
    $first_name = $json['message']['from']['first_name'];
    $username = $json['message']['from']['username'];
    $date = $json['message']["date"];
    $msgid = $json['message']['message_id'];
    $text = $json['message']['text'];

if ($json['callback_query']) {
    $callback_data = $json['callback_query']['data'];
    $uid = $json['callback_query']['message']['chat']['id'];
}

$message_array = array(
    "user_id" => $uid,
    "username" => $username,
    "first_name" => $first_name,
    "message_id" => $msgid,
    "text" => $text,
    "date" => $date,
    "ndate" => gmdate("d.m.Y H:i:s", $date)
);

addUser($uid, $username, $first_name);
MessageSave($message_array);

// –ü—Ä–æ–≤–µ—Ä–∏–º —Å—Ç–∞—Ç—É—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
$user_info = userget($uid); // –∏–∑–≤–ª–µ–∫–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
$user_status = $user_info['status']; // –∏–∑–≤–ª–µ–∫–∞–µ–º —Å—Ç–∞—Ç—É—Å –∏–∑ –º–∞—Å—Å–∏–≤–∞
$user_admin = $user_info['admin']; // –ø—Ä–æ–≤–µ—Ä–∫–∞ –∞–¥–º–∏–Ω–∞

//sendMessage($uid, "–¢–≤–æ–π —Å—Ç–∞—Ç—É—Å –Ω–∞ –º–æ–º–µ–Ω—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–∞: ".$user_status);



///////////// referal init /////////////////////////////
$ref = parseReferal($text);  // –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ ref
if ($ref) {
    RefSave($uid, $ref, $first_name, $username);
    $hello = "–ü—Ä–∏–≤–ª–µ–∫–∏ –¥–≤—É—Ö —é–∑–µ—Ä–æ–≤ –∏ –ø–æ–ª—É—á–∏ –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –ª–∏–Ω–∫";
} // —Å–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–µ—Ñ
/////////////////////////////////////////////////////////
$referals = getReferal($uid);


$ANSWER = "\n_–∫–æ–º–∞–Ω–¥–∞ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞...–ø–æ–ø—Ä–æ–±—É–π _ /start ";//.$first_name;

switch ($text) {

    case ($text == '/update'):
        $ANSWER = "Bot version 1.5.9 
        - –î–æ—Ä–∞–±–æ—Ç–∞–Ω–∞ –∞–¥–º–∏–Ω–∫–∞ 
            - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–ª–ª–∏—á–µ—Å—Ç–≤–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
            - –£–∑–Ω–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω–µ–µ –∏—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
                –ï–≥–æ id, –∏–º—è, –ª–æ–≥–∏–Ω, –¥–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ –ø—Ä–∞–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            - –î–æ—Ä–∞–±–æ—Ç–∞–Ω–∞ –≤—É–Ω–∫—Ü–∏—è —Ä–∞—Å—Å—ã–ª–∫–∏
            - –ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –≤—ã–¥–∞—á–∏ –ø—Ä–∞–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
            - –î–æ–±–∞–≤–ª–µ–Ω—ã inline –∫–Ω–æ–ø–∫–∏ –≤ –∞–¥–º–∏–Ω–∫—É
            - –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –¥–ª—è –∞–¥–º–∏–Ω–∫–∏
        - –ù–µ–º–Ω–æ–≥–æ –¥–æ—Ä–∞–±–æ—Ç–∞ —Ä–µ—Ñ–µ—Ä–∞–ª–∫–∞ (–≤—Å–µ —Ä–∞–≤–Ω–æ –Ω–µ –∏–¥–µ–∞–ª)
        - –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ /update
        - –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ /author
        - –ù–µ–º–Ω–æ–≥–æ –¥–æ—Ä–∞–±–æ—Ç–∞–Ω–∞ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
        - –ü–µ—Ä–µ–ø–∏—Å–∞–Ω—ã –ø–æ–¥—Å–∫–∞–∑–∫–∏
        - –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–º–∞–Ω–∞–¥–∞ /why
        - –¢–µ–ø–µ—Ä—å —Ç—ã –º–æ–∂–µ—à—å –ø—Ä–∏—Å–ª–∞—Ç—å –º–Ω–µ —Å–≤–æ—é –∏–¥–µ—è –∏ –ø–æ–ø—Ä–æ–±—É—é –µ–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å \n –∫–æ–º–∞–Ω–¥–∞ /sendIdea
        - –û–±–Ω–æ–≤–ª–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ /pidor, –Ω—É —ç—Ç–æ —Ç–∞–∫, –∑–∞–±–∞–≤—ã —Ä–∞–¥–∏";

        break;

    case ($text == '/help' || $text == '–ü–æ–º–æ—â—å'):
        $ANSWER = "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ —Ä–∞–∑–¥–µ–ª –ü–æ–º–æ—â–∏! –¢–≤–æ–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä: " . $uid;
        $keyboard = keyboard();
        updateColumns(array("status" => "0"), $uid);
        break;

    case ($text == '/why'):
        $keyboard = delete_keyboard();;
        $ANSWER = "*–ü—Ä–∏–≤–µ—Ç, –¥–æ—Ä–æ–≥–æ–π –¥—Ä—É–≥, –¥–∞–≤–∞–π —Ä–∞—Å—Å–∫–∞–∂—É —Ç–µ–±–µ, –∑–∞—á–µ–º —è –≤—Å–µ —ç—Ç–æ —Å–æ–∑–¥–∞–ª* \n
        –ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ, —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ–π –∏–Ω—Ç–µ—Ä–µ—Å –∏ –≤–æ–∑–º–æ–∂–Ω–æ –Ω–∞—á–∞–ª–æ —á–µ–≥–æ-—Ç–æ –±–æ–ª—å—à–µ–≥–æ.
        –î–∞–Ω–Ω—ã–π –±–æ—Ç —Å–æ–∑–¥–∞–Ω —Ç–æ–ª—å–∫–æ —Å —Ü–µ–ª—å—é –æ–±—É—á–µ–Ω–∏—è
        –∏ –≤—Ä—è–¥ –ª–∏ —Ç—ã —Ç—É—Ç –Ω–∞–π–¥–µ—à—å —á—Ç–æ-—Ç–æ –ø–æ–ª–µ–∑–Ω–æ–µ,
        —Ö–æ—Ç—è –∫—Ç–æ –∑–Ω–∞–µ—Ç...";
        updateColumns(array("status" => "0"), $uid);
        break;

//    case '/reset':
//        $ANSWER = "–ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Å–±—Ä–æ—à–µ–Ω–∞!";
//        $keyboard = delete_keyboard();
//        break;

    case '/pidor':
        $random = rand(1, 3);
        if ($random == 1) {
            $ANSWER = "–ü–æ–∑–¥—Ä–∞–≤–ª—è—é, " .$first_name." –¢—ã –Ω–µ –ø–∏–¥–æ—Ä!\n
–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —Ç–∞–∫–æ–π —É–¥–∞—á–∏ –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º –º–∏—Ä–µ —Ä–∞–≤–Ω–æ 1/3, –∫ —Å–æ–∂–∞–ª–µ–Ω–∏—é...\n
–ú–æ–∂–µ—à—å –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –µ—â–µ —Ä–∞–∑";
        } else {
            $ANSWER = "–ú–æ–π —Ç–µ—Å—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–æ—á—Ç–∏ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –æ—à–∏–±–∞–µ—Ç—Å—è, –ø–æ–∫–∞–∑–∞–ª —á—Ç–æ —Ç—ã " .$first_name. "\n*–ü–ò–î–û–†!*\n
–ù–æ —Ç—ã –Ω–µ —Ä–∞—Å—Å—Ç—Ä–∞–∏–≤–∞–π—Å—è, –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º –º–∏—Ä–µ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —Å—Ç–∞—Ç—å –ø–∏–¥–æ—Ä–æ–º —Ä–∞–≤–Ω–∞ 2/3
–ú–æ–∂–µ—à—å –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –µ—â–µ —Ä–∞–∑... –í–¥—Ä—É–≥ –ø–æ–≤–µ–∑–µ—Ç....";
        }
        break;

    case ($user_admin == '1' and $user_status == '99'):
        updateColumns(array("status" => "0"), $uid);
        if(IdeaSave($uid, $username, $first_name, $text) == true) {
            $ANSWER = "–ò–¥–µ—è —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞...";
        }else {
            $ANSWER = "–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞, –≤–æ–∑–º–æ–∂–Ω–æ —Ç–µ–∫—Å—Ç —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π";
        }
        break;

    case ($text == '/sendIdea'):
        $ANSWER = "–ü—Ä–∏—à–ª–∏ –º–Ω–µ —Å–≤–æ—é –∏–¥–µ—è—é, —è –±—É–¥—É –æ—á–µ–Ω—å –±–ª–∞–≥–æ–¥–∞—Ä–µ–Ω\n P.S –ü–æ–∫–∞ —Å –¥–∏–Ω–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–º –º–æ–≥—É—Ç –±—ã—Ç—å –ø—Ä–æ–±–ª–µ–º—ã";
        updateColumns(array("status" => "99"), $uid);
        break;


    case '–û–±—É—á–µ–Ω–∏–µ':
        $ANSWER = "–¢—ã –≤ —Ä–∞–∑–¥–µ–ª–µ –û–±—É—á–µ–Ω–∏—è.";
        $keyboard = keyboard_learning();
        updateColumns(array("status" => "2"), $uid);
        break;


    case 'Instagram':
        $ANSWER = "–¢—ã –≤ —Ä–∞–∑–¥–µ–ª–µ Instagram.";
        $keyboard = keyboard_instagram();
        updateColumns(array("status" => "3"), $uid);
        break;

// –µ—Å–ª–∏ —Å—Ç–∞—Ç—É—Å = 2, –∑–Ω–∞—á–∏—Ç –æ–Ω –≤ —Ä–∞–∑–¥–µ–ª–µ "–û–±—É—á–µ–Ω–∏–µ", –≤–µ—Ä–Ω–µ–º –µ–≥–æ –≤ –æ—Å–Ω–æ–≤–Ω–æ–µ –º–µ–Ω—é –∏ –æ–±–Ω–æ–≤–∏–º —Å—Ç–∞—Ç—É—Å –Ω–∞ 0
//–ï—Å–ª–∏ —Å—Ç–∞—Ç—É—Å = 3, –∑–Ω–∞—á–∏—Ç –æ–Ω –≤ —Ä–∞–∑–¥–µ–ª–µ Instagram, –≤–µ—Ä–Ω–µ–º –µ–≥–æ –≤ —Ä–∞–∑–¥–µ–ª –û–±—É—á–µ–Ω–∏—è –∏ –¥–∞–¥–∏–º —Å—Ç–∞—Ç—É—Å 2
    case '–ù–∞–∑–∞–¥':
        $ANSWER = "–û—Ç–ª–∏—á–Ω–æ! –í–µ—Ä–Ω—É —Ç–µ–±—è –Ω–∞ –æ–¥–∏–Ω –ø—É–Ω–∫—Ç –Ω–∞–∑–∞–¥";

        if ($user_status == 2) {
            $keyboard = keyboard();
            updateColumns(array("status" => "0"), $uid);
        } else if ($user_status == 3) {
            $keyboard = keyboard_learning();
            updateColumns(array("status" => "2"), $uid);
        }
        break;
    case ($text == '/author'):
        $ANSWER = '–ê–≤—Ç–æ—Ä–æ–º –≤—Å–µ–≥–æ —ç—Ç–æ–≥–æ —è–≤–ª—è—é—Å—å —è';
        $keyboard = inline_keyboard();
        break;


    case '/start':
        $ANSWER = "–ü—Ä–∏–≤–µ—Ç, " . $first_name . "  –¢—ã –ø–∏–¥–æ—Ä! –ò –≤–∞—Å —Ç–∞–∫–∏—Ö —É–∂–µ - " .$users =15 + count(getUsers('users')). "
      –ù–æ —Å–ø–∞—Å–∏–±–æ —á—Ç–æ –ø—Ä–∏—à–µ–ª –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å)
      –°–ø–∏—Å–æ–∫ –∫–æ–º–º–∞–Ω–¥ –¥–ª—è –±–æ—Ç–∞:
      /start - –Ω—É —ç—Ç–æ –ø–æ–Ω—è—Ç–Ω–æ
      /update - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Ä—Å–∏—é –±–æ—Ç–∞ –∏ –ø—Ä–æ—á–∏—Ç–∞—Ç—å –æ –Ω–æ–≤–æ–≤–≤–µ–¥–µ–Ω–∏—è—Ö
      /sendIdea - –ú–æ–∂–µ—à—å –ø—Ä–∏—Å–ª–∞—Ç—å –º–Ω–µ —Å–≤–æ—é –∏–¥–µ—é)
      /why –ï—Å–ª–∏ —Ç–µ–±–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ –∑–∞—á–µ–º —è –≤—Å–µ —ç—Ç–æ –¥–µ–ª–∞—é
      /help - –±–µ—Å–ø–æ–ª–µ–∑–Ω–∞—è —Ö—É–π–Ω—è –Ω–æ —á–µ–∫–Ω–∏
      /author - –°—Å—ã–ª–æ—á–∫–∞ –Ω–∞ –º–µ–Ω—è )
      /pidor - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø–∏–¥–æ—Ä–∞ üòÅ
      
      –†–∞–∑–¥–µ–ª –æ–±—É—á–µ–Ω–∏—è –ø–æ–∫–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø—Ä–æ—Å—Ç–æ —Ç–µ—Å—Ç –∫–Ω–æ–ø–æ–∫
      
      P.S –ï—Å–ª–∏ –≤–¥—Ä—É–≥ —á—Ç–æ-—Ç–æ –Ω–µ —Ç–∞–∫, –Ω–∞–ø–∏—à–∏ /start
      ";
        $keyboard = keyboard();
        break;
}

// –ö–Ω–æ–ø–∫–∏ Instagram
switch ($text) {
    case '–î–∏–∑–∞–π–Ω':
        $ANSWER = "https://telegra.ph/Test-bota-03-13";
        updateColumns(array("status" => "3"), $uid);
        break;
    case '–¶–µ–ª–µ–≤–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è':
        $ANSWER = "—Ç—É—Ç –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å—Å—ã–ª–∫–∞";
        updateColumns(array("status" => "3"), $uid);
        break;
    case '–¢–∞—Ä–≥–µ—Ç':
        $ANSWER = "—Ç—É—Ç –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å—Å—ã–ª–∫–∞";
        updateColumns(array("status" => "3"), $uid);
        break;

}

// –ö–Ω–æ–ø–∫–∏ –∞–¥–º–∏–Ω–∫–∏

switch ($text) {
    case ($user_admin == '1' and $user_status == '30'):
        updateColumns(array("admin" => "1"), $text);
        $ANSWER = "–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –Ω–∞–∑–Ω–∞—á–µ–Ω";
        updateColumns(array("status" => "0"), $uid);
        break;

    case ($text == '/addadmin' && $user_admin == '1'):
        $ANSWER = "–ü—Ä–∏—à–ª–∏—Ç–µ ID...";
        updateColumns(array("status" => "30"), $uid);
        break;

    case ($user_admin == '1' and $user_status == '31'):
        updateColumns(array("admin" => "0"), $text);
        $ANSWER = "–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —Ä–∞–∑–∂–∞–ª–æ–≤–∞–Ω";
        updateColumns(array("status" => "0"), $uid);
        break;

    case ($text == '/deladmin' && $user_admin == '1'):
        $ANSWER = "–ü—Ä–∏—à–ª–∏—Ç–µ ID...";
        updateColumns(array("status" => "31"), $uid);
        break;

    case ($user_admin == '1' and $user_status == '50'):
        $keyboard = inline_keyboard();
        $user_info =  getLogin($text);
        updateColumns(array("status" => "0"), $uid);
        $ANSWER = "ID - " .$user_info['id'] . " | –ò–º—è - " .$user_info['first_name'] . " | –î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ - " .$user_info['date_begin'] . " | –ê–¥–º–∏–Ω–∫–∞ - " .$user_info['admin'];
        break;

    case($text == '/info'  || $text == '–ò–Ω—Ñ–æ'):
        $keyboard = delete_keyboard();
        $ANSWER = "–ü—Ä–∏—à–ª–∏—Ç–µ –ª–æ–≥–∏–Ω...";
        updateColumns(array("status" => "50"), $uid);

        break;

    case ($text == '/admin'):
        if ($user_admin == '1') {
            $ANSWER = '–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π, –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä!';
            $keyboard = keyboard_admin();
            updateColumns(array("status" => "2"), $uid);
        }else {
            $ANSWER = "–¢—ã –Ω–µ –∞–¥–º–∏–Ω, —Ç—ã –ø–∏–¥–æ—Ä! \n–¢–µ–±–µ —Å—é–¥–∞ –Ω–µ–ª—å–∑—è!";
        }
        break;

    case ($text == '–°–∫–æ–ª—å–∫–æ —é–∑–µ—Ä–æ–≤' && $user_admin == '1'):
        $users = getUsers('users');
        $ANSWER = "\n–í—Å–µ–≥–æ —é–∑–µ—Ä–æ–≤: " . count($users);
        break;

    case ($user_admin == '1' and $user_status == '100'):
        $users = getUsers('users');

        $ANSWER = "–û—Ç–ª–∏—á–Ω–æ, —Ä–∞—Å—Å—ã–ª–∞—é —Ç–µ–∫—Å—Ç:\n\n" . $text . "\n
			–Ω–∞ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.\n\n–í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: " . count($users);
        sendMessage($uid, $ANSWER);

        updateColumns(array("status" => "0"), $uid);
        for ($i = 0; $i < count($users); $i++) {
            sendMessage($users[$i], $text);
        }
        $ANSWER = "–†–∞—Å—Å—ã–ª–∫–∞ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!";
        break;


    case ($text == '/send' || $text == '–†–∞–∑–æ—Å–ª–∞—Ç—å –≤—Å–µ–º'):
        if ($user_admin == '1') {
            $ANSWER = '–ü—Ä–∏—à–ª–∏—Ç–µ —Ç–µ–∫—Å—Ç –¥–ª—è —Ä–∞—Å—Å—ã–ª–∫–∏...';
            updateColumns(array("status" => "100"), $uid);
        } else {
            $ANSWER = '–¢—ã –Ω–µ –∞–¥–º–∏–Ω, —Ç—ã –ø–∏–¥–æ—Ä! —Ç–µ–±–µ —Å—é–¥–∞ –Ω–µ–ª—å–∑—è! –¢–æ–ª—å–∫–æ —è –º–æ–≥—É —Ä–∞—Å—Å—ã–ª–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è!';
        }
        break;

}

switch ($callback_data){

    case '/in_hello':
        $ANSWER = "–°—Ä–∞–±–æ—Ç–∞–ª–∞ –∫–Ω–æ–ø–∫–∞ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è!";
        break;

    case '/in_bye':
        $ANSWER = "–°—Ä–∞–±–æ—Ç–∞–ª–∞ –∫–Ω–æ–ø–∫–∞ –ø—Ä–æ—â–∞–Ω–∏—è!";
        break;
}

// –ö–Ω–æ–ø–∫–∏ —Ä–µ—Ñ–µ—Ä–∞–ª–∫–∏

switch ($text){
    case ($text == '/ref' || $text == '–†–µ—Ñ–µ—Ä–∞–ª'):
        $ANSWER = "–ü—Ä–∏–≤–ª–µ–∫–∏ –¥–≤—É—Ö —é–∑–µ—Ä–æ–≤ –∏ –ø–æ–ª—É—á–∏ –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –ª–∏–Ω–∫";
        $keyboard = keyboard_ref();
        updateColumns(array("status" => "2"), $uid);
        break;
    case "–ü–æ–ª—É—á–∏—Ç—å –ª–∏–Ω–∫":
        if ($referals < 2) { // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω—É–∂–Ω–æ–µ —á–∏—Å–ª–æ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤
            $ANSWER =
                "–ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –ª–∏–Ω–∫, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ, —á—Ç–æ–±—ã –ø–æ –≤–∞—à–µ —Å—Å—ã–ª–∫–µ –ø–µ—Ä–µ—à–ª–æ *–≤—Å–µ–≥–æ 2 —á–µ–ª–æ–≤–µ–∫–∞*.\n
–ü—Ä–∏–≤–ª–µ—á–µ–Ω–æ:" . $referals . "\n
_–í–∞—à–∞ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞:\n_ t.me/" . $BOT_USERNAME . "?start=" . $uid;

        } else {
            $ANSWER = 'http://google.com';
        }
        break;

    case "–†–µ—Ñ–µ—Ä–∞–ª—ã":
        $ANSWER = "\n–ü—Ä–∏–≤–ª–µ—á–µ–Ω–æ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤: " . $referals;
        break;
}


sendMessage($uid, $ANSWER, $keyboard);

// –ü—Ä–æ–≤–µ—Ä–∏–º —Å—Ç–∞—Ç—É—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
//$user_info =  userget($uid); // –∏–∑–≤–ª–µ–∫–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
//$user_status = $user_info['status']; // –∏–∑–≤–ª–µ–∫–∞–µ–º —Å—Ç–∞—Ç—É—Å –∏–∑ –º–∞—Å—Å–∏–≤–∞
// sendMessage($uid, "–¢–≤–æ–π —Å—Ç–∞—Ç—É—Å –ø–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–∞: ".$user_status);

?>